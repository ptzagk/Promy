<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Upperux</title>
</head>
<body>
    <h1 id="view-total">
        0
    </h1>
    <button onclick="store.dispatch({type:'ADD',value:5})">
        Sumar 5
    </button>
    <button onclick="store.dispatch({type:'RES',value:5})">
        Restar 5
    </button>
    <script src="src/Promy.js"></script>
    <script>
        /*** 
        STORE PADRE
        **/
        var store      = new Promy(0);
        
        store.middleware((state,action,next)=>{
            return next(state,action);
        })
        
        store.action((state,{type,value})=>{
            switch(type){
                case 'ADD':
                    state = state + value;
                break;
                case 'RES':
                    state = state - value;
                break;
            }
            return state;
        })
        
        store.subscribe((state)=>{
            document.querySelector('#view-total').textContent = state;
        })
        
        
        store.dispatch({type:'ADD',value:500})
        
        riot.mount('app')
    </script>
</body>
</html>
